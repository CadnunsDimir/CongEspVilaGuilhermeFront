<h1> editando território</h1>
<form [formGroup]="territoryCardForm">
    <p>
        Localidade: <input class="inline" type="text" formControlName="neighborhood"/>
        Cartão Nº {{card.cardId}}
        Total de Endereços: {{card.directions.length}}
    </p>

    <p class="edit-hint">Você pode clicar e segurar para mudar a ordem</p>

    <button class="save-button" (click)="save()" [disabled]="saving">salvar</button>
    <button class="cancel-button" (click)="cancel()" [disabled]="saving">cancelar</button>

    <table class="show-border">
        <tr>
            <th>#</th>
            <th>Rua</th>    
            <th>Numero</th>
            <th>complemento</th>
            <th></th>    
        </tr>
        <tbody>
            @for (item of directionsControls.controls; let i = $index; track i) {
                <tr [ngClass]="{'changing-position': i == itemChangingPosition, 'dragging': i == draggingCard}" 
                    [formGroup]="item" 
                    (dragstart)="drag(i)"
                    (drop)="drop(i)"
                    (dragover)="dragover($event)"
                    draggable="true">
                    <td>{{i+1}}</td>
                    <td><input type="text" formControlName="streetName"></td>
                    <td><input type="text" formControlName="houseNumber"></td>
                    <td><input type="text" formControlName="complementaryInfo"></td>
                    <td class="actions">
                        <a class="remove" (click)="removeDirection(i)" title="remover" aria-label="remover">X</a>              
                    </td>
                </tr>
            }
        </tbody>
    </table>
    <button (click)="addNewDirecction()">adicionar novo endereço</button>
  </form>